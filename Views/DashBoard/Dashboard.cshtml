@model GrainMaster.Models.CombinedModel
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_master.cshtml";
}

<script src="~/JS/jquery-1.10.2.js"></script>

<style type="text/css">
    .card-body > p, #titleHead {
        white-space: normal !important;
    }

    .spinner-grow {
        position: absolute;
        top: 1rem;
        right: 0px;
    }
    .tblNews tr>td{
        padding:0.65rem !important;
        
    }
    .tblNews {
        background-color: white !important;
    }
</style>


<div class="py-4 px-3 px-md-4">

    <div class="mb-3 mb-md-4 d-flex justify-content-between">
        <div class="h3 mb-0">
            Dashboard
        </div>
    </div>
    <div class="row" style="display:@(Model.NewsRepositoriesModel.Count >0 ? "block" : "none")">
        <div class="col-md-6 col-xl-4 mb-3 mb-md-4">
            @*<div class="card-body pt-0">*@
            <div class="table-responsive-xl" >
                
                <table class="text-nowrap mb-0 tblNews">
                    <thead>Latest News</thead>
                    <tbody>
                        <tr>
                            @foreach (var item in Model.NewsRepositoriesModel)
                            {
                                <td>
                                    <div class="card">
                                        <img src="@item.Image" style="height:10rem !important;width:14rem;" class="card-img-top" alt="...">
                                        <div class="card-body" style="height:10rem;">
                                            <a target="_blank" href="@item.Link" class="card-title"><h5 id="titleHead">@(item.Title.ToString().Length > 100 ? item.Title.Substring(0,100)+"....." : item.Title )</h5></a>
                                            @*<p class="card-text">@(item.Description.ToString().Length > 500 ? item.Description.Substring(0,200)+"....." : item.Description )</p>*@
                                        </div>
                                    </div>
                                </td>
                            }
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td colspan="5" style="float:right !important;">
                                <a href="../News/GetAll">
                                    Show More
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            @*</div>*@
        </div>
    </div>
   
    <div class="row">
        @if (Model != null && Model.PortFolioList != null)
        {
            int count = 0;
            foreach (var item in Model.PortFolioList)
            {
                if (count == 6)
                {
                    break;
                }
                if (item.Count > 0 || (item.ISDealType != null && item.ISDealType.IsPositiveDeal || item.ISDealType.IsNegativeDeal))
                {
                    count++;
                    <div class="col-md-6 col-xl-4 mb-3 mb-md-4">
                        <!-- Card -->
                        <div class="card h-100">
                            <div class="card-header d-flex">
                                <h5 class="h6 font-weight-semi-bold text-uppercase mb-0">@item.StockName</h5>
                                <div class="spinner-grow text-success" role="status">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="media align-items-center px-3 px-md-4 mb-3 mb-md-4">
                                    <div class="media-body">
                                        <h4 class="h3 lh-1 mb-2">₹@((int)Convert.ToDecimal(item.Price)) X @item.Quantity = ₹@((int)Convert.ToDecimal(item.Price) * (int)Convert.ToDecimal(item.Quantity)) </h4>
                                        <p class="small text-muted mb-0">
                                            +₹7,213.38 <span class="text-success mx-1">+10.23%</span>
                                        </p>
                                        <p class="small text-muted mb-0" style="padding-top:5px;">
                                            <a href="../Deal/GetDeal" style="display:@(item.ISDealType.IsPositiveDeal || item.ISDealType.IsNegativeDeal  ? "" : "none")" class="badge badge-pill badge-success" target="_blank">@(item.ISDealType.IsPositiveDeal? "Positive Deals" : "Negative Deals" )</a>
                                            <a href="@(item.Count > 0 ? item.link : "#")" style="display:@(item.Count > 0 ? "" : "none")" class="badge badge-pill badge-success" target="_blank">News</a>
                                            <a href="#" class="badge badge-pill badge-success">Volume Spiked</a>
                                        </p>
                                        <p class="small text-muted mb-0" style="padding-top:15px;">
                                            <span class="badge badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">LD</span>
                                                <span style="font-size:medium;">@item.DeliveryYesterday&nbsp;&nbsp;</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">WD</span>
                                                <span style="font-size:medium;">@item.DeliveryAverageWeek&nbsp;&nbsp;</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">MD</span>
                                                <span style="font-size:medium;">@item.DeliveryAverageMonth&nbsp;&nbsp;</span>
                                            </span>
                                        </p>
                                        <p class="small text-muted mb-0" style="padding-top:5px;">
                                            <span class="badge badge-complex bg-semi-soft-danger text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">S1</span>
                                                <span style="font-size:medium;">₹@item.S1</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-danger text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">S2</span>
                                                <span style="font-size:medium;">₹@item.S2</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-danger text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">S3</span>
                                                <span style="font-size:medium;">₹@item.S3</span>
                                            </span>
                                        </p>
                                        <p class="small text-muted mb-0" style="padding-top:5px;">
                                            <span class="badge badge-complex bg-semi-soft-primary-darker text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">R1</span>
                                                <span style="font-size:medium;">₹@item.R1</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary-darker text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">R2</span>
                                                <span style="font-size:medium;">₹@item.R2</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary-darker text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">R3</span>
                                                <span style="font-size:medium;">₹@item.R3</span>
                                            </span>
                                        </p>
                                        <p class="small text-muted mb-0" style="padding-top:5px;">
                                            <span class="badge badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">5</span>
                                                <span style="font-size:medium;">₹@item.SMA5</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">10</span>
                                                <span style="font-size:medium;">₹@item.SMA10</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">20</span>
                                                <span style="font-size:medium;">₹@item.SMA20</span>
                                            </span>
                                        </p>
                                        <p class="small text-muted mb-0" style="padding-top:5px;">
                                            <span class="badge badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">50</span>
                                                <span style="font-size:medium;">₹@item.SMA50</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">100</span>
                                                <span style="font-size:medium;">₹@item.SMA100</span>
                                            </span>
                                            <span class="badge  badge-complex bg-semi-soft-primary text-white">
                                                <span class="badge badge-sm badge-danger rounded-circle mr-2">200</span>
                                                <span style="font-size:medium;">₹@item.SMA200</span>
                                            </span>
                                        </p>

                                        <p class="small mb-0 text-darker" style="padding-top:25px;">
                                            <button class="btn btn-warning btn-sm rounded-pill" type="button">Edit</button>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            Added : <strong>@Convert.ToDateTime(item.Date).ToString("dd MMMM yyy")</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End Card -->
                    </div>
                }

            }
        }

    </div>
    <div class="row">
        <div class="col-md-6 col-xl-4 mb-3 mb-xl-4">
            <!-- Widget -->
            <div class="card flex-row align-items-center p-3 p-md-4">
                <div class="icon icon-lg bg-soft-primary rounded-circle mr-3">
                    <i class="gd-bar-chart icon-text d-inline-block text-primary"></i>
                </div>
                <div>
                    <h4 class="lh-1 mb-1">80%</h4>
                    <h6 class="mb-0">Gains</h6>
                </div>
                <i class="gd-arrow-up icon-text d-flex text-success ml-auto"></i>
            </div>
            <!-- End Widget -->
        </div>

        <div class="col-md-6 col-xl-4 mb-3 mb-xl-4">
            <!-- Widget -->
            <div class="card flex-row align-items-center p-3 p-md-4">
                <div class="icon icon-lg bg-soft-secondary rounded-circle mr-3">
                    <i class="gd-wallet icon-text d-inline-block text-secondary"></i>
                </div>
                <div>
                    <h4 class="lh-1 mb-1">₹18,000.00</h4>
                    <h6 class="mb-0">Total Investment</h6>
                </div>
                <i class="gd-arrow-up icon-text d-flex text-success ml-auto"></i>
            </div>
            <!-- End Widget -->
        </div>

        <div class="col-md-6 col-xl-4 mb-3 mb-xl-4">
            <!-- Widget -->
            <div class="card flex-row align-items-center p-3 p-md-4">
                <div class="icon icon-lg bg-soft-warning rounded-circle mr-3">
                    <i class="gd-money icon-text d-inline-block text-warning"></i>
                </div>
                <div>
                    <h4 class="lh-1 mb-1">₹10,000.00</h4>
                    <h6 class="mb-0">Net Profit</h6>
                </div>
                <i class="gd-arrow-up icon-text d-flex text-success ml-auto"></i>
            </div>
            <!-- End Widget -->
        </div>

    </div>
    <div class="row">
        <div class="col-12">
            <div class="card mb-3 mb-md-4">
                <div class="card-header">
                    <h5 class="font-weight-semi-bold mb-0">Recent Orders</h5>
                </div>

                <div class="card-body pt-0">
                    <div class="table-responsive-xl">
                        <table id="table1" class="table text-nowrap mb-0">
                            <thead>
                                <tr>
                                    <th class="font-weight-semi-bold border-top-0 py-2">#</th>
                                    <th class="font-weight-semi-bold border-top-0 py-2">Customer</th>
                                    <th class="font-weight-semi-bold border-top-0 py-2">Quantity</th>
                                    <th class="font-weight-semi-bold border-top-0 py-2">Amount</th>
                                    <th class="font-weight-semi-bold border-top-0 py-2">Created Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if(Model == null && Model.PortFolioList == null)
                                {
                                    <tr><td colspan="5" class="text-danger text-center">No Record found.</td></tr>
                                }
                                @if (Model != null && Model.PortFolioList != null)
                                {
                                    foreach (var item in Model.PortFolioList)
                                    {
                                        <tr>
                                            <td class="py-3">@item.ID</td>
                                            <td class="py-3">
                                                <div>@item.StockName</div>
                                                <div class="text-muted">Acme Inc.</div>
                                            </td>
                                            <td class="py-3">@item.Quantity</td>
                                            <td class="py-3">₹@item.Price</td>
                                            <td class="py-3">@item.Date.ToString("MM/dd/yyyy")</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script src="~/wwwroot/js/tablepagination.js"></script>
    <script>
        $(document).ready(function () {
            //$.noConflict();
            pagination("#table1");
        });
    </script>


